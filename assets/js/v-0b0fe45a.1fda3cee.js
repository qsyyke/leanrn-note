"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[7445],{47833:(e,n,s)=>{s.r(n),s.d(n,{data:()=>a});const a={key:"v-0b0fe45a",path:"/nginx/%E5%AE%89%E8%A3%85.html",title:"Linux中安装Nginx以及报错解决",lang:"en-US",frontmatter:{date:"2022/1/7 15:27",title:"Linux中安装Nginx以及报错解决",tag:["linux","nginx"],categories:["nginx","linux 软件安装"]},excerpt:"",headers:[{level:2,title:"安装pcre",slug:"安装pcre",children:[]},{level:2,title:"其他的依赖",slug:"其他的依赖",children:[]},{level:2,title:"安装nginx",slug:"安装nginx",children:[]},{level:2,title:"访问",slug:"访问",children:[]}],git:{updatedTime:1654857597e3,contributors:[{name:"qsyyke",email:"2291308094@qq.com",commits:1}]}}},41959:(e,n,s)=>{s.r(n),s.d(n,{default:()=>x});var a=s(66252);const l=(0,a.uE)('<p>下面记录在Linux中安装Nginx的过程中，遇到的报错以及解决方法</p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>在安装Nginx的时候，我们还需要安装其他的依赖</p><ul><li>pcre</li><li>openssl</li><li>zlib</li><li>nginx</li></ul></div><h2 id="安装pcre" tabindex="-1"><a class="header-anchor" href="#安装pcre" aria-hidden="true">#</a> 安装pcre</h2><p>可以使用<code>wget</code>命令从网络上下载压缩包，也可以下载之后，使用ftp工具，上传上去</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">wget</span> http://downloads.sourceforge.net/project/pcre/pcre/8.37/pcre-8.37.tar.gz\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>进入<code>pcre-8.37.tar.gz</code>所在目录，使用<code>tar -xvf pcre-8.37.tar.gz</code>解压，然后进入此pcre文件夹，运行</p><blockquote><p>如果是下载的是.bz2，则使用<code>tar jxvf FileName.tar.bz2</code>进行解压</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>./configure\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>',8),i=(0,a.Uk)("执行上面命令的时候，你需要安装gcc编译器，使用"),c=(0,a._)("code",null,"yum install gcc",-1),r=(0,a.Uk)("进行安装，如果提示仓库错误，可以查看该篇"),o={href:"https://blog.csdn.net/xiaocao_debug/article/details/122807870",target:"_blank",rel:"noopener noreferrer"},p=(0,a.Uk)("文章"),d=(0,a._)("p",null,[(0,a.Uk)("如果执行"),(0,a._)("code",null,"./configure"),(0,a.Uk)("的时候，报"),(0,a._)("code",null,"configure: error: Invalid C++ compiler or C++ compiler flags"),(0,a.Uk)("错误，那么你需要执行"),(0,a._)("code",null,"yum install -y gcc-c++*")],-1),t=(0,a.uE)('<p>待完成之后，执行<code>make</code>和<code>make install</code>命令，如果这里报错，<code>make</code>命令未找到，可以使用下面方式进行安装</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum -y <span class="token function">install</span> <span class="token function">make</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="其他的依赖" tabindex="-1"><a class="header-anchor" href="#其他的依赖" aria-hidden="true">#</a> 其他的依赖</h2><p>openssl和zlib我们使用yum进行安装，执行下面命令</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum -y <span class="token function">install</span> <span class="token function">make</span> zlib zlib-devel gcc-c++ libtool openssl openssl-devel\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="安装nginx" tabindex="-1"><a class="header-anchor" href="#安装nginx" aria-hidden="true">#</a> 安装nginx</h2><p>下载Nginx压缩包，解压，进入Nginx目录</p><p>然后执行</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>./configure\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><blockquote><p>如果需要使用ssl，则需要运行</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>./configure --prefix<span class="token operator">=</span>/usr/local/webserver/nginx --with-http_ssl_module\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></blockquote><p>完成之后，运行<code>make</code>和<code>make install</code></p><p>运时，如果报下面错误</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>“src/os/unix/ngx_user.c:26:7: error: ‘struct crypt_data’ has no member named ‘current_salt’\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>这个我们使用<code>vim</code>修改一下源码就可以了</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> src/os/unix/ngx_user.c <span class="token comment"># 在nginx解压目录中</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>',15),u=(0,a._)("p",null,[(0,a._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"",originSrc:"https://picture.xcye.xyz/image-20220107153802986.png",data:"aurora"})],-1),g=(0,a.uE)('<p>修改上面之后，我还遇到其他的问题，这里也是需要修改源码</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> objs/Makefile <span class="token comment"># 在Nginx解压目录中</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>',2),b=(0,a._)("p",null,[(0,a._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"在这里插入图片描述",originSrc:"https://ooszy.cco.vin/img/blog-note/2020070701221618.png",data:"aurora"})],-1),m=(0,a.uE)('<p>修改完上面之后，那么现在执行<code>make install</code>，待执行成功之后，会在<code>/usr/local/</code>目录中，创建nginx目录，可以根据这个检查是否安装成功</p><h2 id="访问" tabindex="-1"><a class="header-anchor" href="#访问" aria-hidden="true">#</a> 访问</h2><p>因为Nginx默认监听的端口是80端口，我们进入<code>/usr/local/nginx/sbin/</code>中，然后执行<code>./nginx</code>便会启动Nginx，待启动成功之后，我们可以直接在浏览器中，输入Linux服务器ip，便可以访问了</p><p>如果启动Nginx，但是输入ip一直没响应，那么你应该没关闭防火墙</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl stop firewall.service\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>',5),h=(0,a._)("p",null,[(0,a._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"",originSrc:"https://picture.xcye.xyz/image-20220107154828494.png",data:"aurora"})],-1),v={},x=(0,s(83744).Z)(v,[["render",function(e,n){const s=(0,a.up)("ExternalLinkIcon");return(0,a.wg)(),(0,a.iD)(a.HY,null,[l,(0,a._)("blockquote",null,[(0,a._)("p",null,[i,c,r,(0,a._)("a",o,[p,(0,a.Wm)(s)])]),d]),t,u,g,b,m,h],64)}]])}}]);