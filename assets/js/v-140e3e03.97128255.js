"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[5044],{38029:(s,e,a)=>{a.r(e),a.d(e,{data:()=>n});const n={key:"v-140e3e03",path:"/rabbitmq/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85.html",title:"RabbitMQ软件安装",lang:"en-US",frontmatter:{date:"2022/1/8 8:19",title:"RabbitMQ软件安装"},excerpt:"",headers:[{level:2,title:"开启web管理插件",slug:"开启web管理插件",children:[{level:3,title:"添加一个新用户",slug:"添加一个新用户",children:[]},{level:3,title:"设置用户角色",slug:"设置用户角色",children:[]},{level:3,title:"设置用户权限",slug:"设置用户权限",children:[]},{level:3,title:"查看当前用户和角色",slug:"查看当前用户和角色",children:[]}]},{level:2,title:"启动rabbitmq-server服务报错",slug:"启动rabbitmq-server服务报错",children:[]},{level:2,title:"常用命令",slug:"常用命令",children:[]}],git:{updatedTime:1654857597e3,contributors:[{name:"qsyyke",email:"2291308094@qq.com",commits:1}]}}},60986:(s,e,a)=>{a.r(e),a.d(e,{default:()=>b});var n=a(66252);const l=(0,n.uE)('<p>我使用的centos版本为<code>Linux qsyyke 4.18.0-348.el8.x86_64 #1 SMP Tue Oct 19 15:14:17 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux</code></p><p>需要的依赖为</p><ul><li>erlang-23.3.4.10-1.el8.x86_64.rpm rabbitmq的运行需要erlang语言支持</li><li>rabbitmq-server-3.8.8-1.el7.noarch.rpm</li><li>yum install socat -y</li></ul><p>待安装成功之后，我们可以使用</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl start rabbitmq-server.service\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>也可以使用</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>/sbin/service rabbitmq-server start <span class="token comment">#启动</span>\n/sbin/service rabbitmq-server status\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><p>设置开机启动rabbitmq服务</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">chkconfig</span> rabbitmq-server on\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li></ul><h2 id="开启web管理插件" tabindex="-1"><a class="header-anchor" href="#开启web管理插件" aria-hidden="true">#</a> 开启web管理插件</h2><p>需要运行<code>rabbitmq-plugins enable rabbitmq_management</code>安装所需要的插件，安装之后，默认的端口号为<code>15672</code>,默认的账号密码为<code>guest</code>，但是我们不能登录成功，还需要为这个<code>guest</code>设置权限或者重新注册一个用户</p><blockquote><p>如果执行的时候，出现<code>{:query, :rabbit@zhangsan, {:badrpc, :timeout}}</code>，这是因为你的/etc/hostname 中的host并不是<code>localhost</code>，你需要将其修改为<code>localhost</code>，重新启动</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@qsyyke bin<span class="token punctuation">]</span><span class="token comment"># rabbitmq-plugins enable rabbitmq_management</span>\nEnabling plugins on <span class="token function">node</span> rabbit@qsyyke:\nrabbitmq_management\nThe following plugins have been configured:\n  rabbitmq_management\n  rabbitmq_management_agent\n  rabbitmq_web_dispatch\nApplying plugin configuration to rabbit@qsyyke<span class="token punctuation">..</span>.\nThe following plugins have been enabled:\n  rabbitmq_management\n  rabbitmq_management_agent\n  rabbitmq_web_dispatch\n\n<span class="token builtin class-name">set</span> <span class="token number">3</span> plugins.\nOffline change<span class="token punctuation">;</span> changes will take effect at broker restart.\n<span class="token punctuation">[</span>root@qsyyke bin<span class="token punctuation">]</span><span class="token comment"># </span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div>',12),r=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"",originSrc:"https://picture.xcye.xyz/image-20220108085216952.png",data:"aurora"})],-1),t=(0,n.uE)('<h3 id="添加一个新用户" tabindex="-1"><a class="header-anchor" href="#添加一个新用户" aria-hidden="true">#</a> 添加一个新用户</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>rabbitmqctl add_user admin <span class="token number">123456</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="设置用户角色" tabindex="-1"><a class="header-anchor" href="#设置用户角色" aria-hidden="true">#</a> 设置用户角色</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>rabbitmqctl set_user_tags admin administrator\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="设置用户权限" tabindex="-1"><a class="header-anchor" href="#设置用户权限" aria-hidden="true">#</a> 设置用户权限</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>set_permissions <span class="token punctuation">[</span>-p <span class="token operator">&lt;</span>vhostpath<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>user<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>conf<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>write<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>read<span class="token operator">&gt;</span>\n\nrabbitmqctl set_permissions -p <span class="token string">&quot;/&quot;</span> admin <span class="token string">&quot;.*&quot;</span> <span class="token string">&quot;.*&quot;</span> <span class="token string">&quot;.*&quot;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>用户<code>user_admin</code>具有/vhost1这个virtual host中所有资源的配置、写、读权限</p><h3 id="查看当前用户和角色" tabindex="-1"><a class="header-anchor" href="#查看当前用户和角色" aria-hidden="true">#</a> 查看当前用户和角色</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>rabbitmqctl list_users\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>::: warnint</p><p>如果遇到执行的速度非常慢，那么请关闭防火墙</p><p>:::</p>',12),i=(0,n._)("p",null,[(0,n._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"",originSrc:"https://picture.xcye.xyz/image-20220108092137328.png",data:"aurora"})],-1),c=(0,n.uE)('<h2 id="启动rabbitmq-server服务报错" tabindex="-1"><a class="header-anchor" href="#启动rabbitmq-server服务报错" aria-hidden="true">#</a> 启动rabbitmq-server服务报错</h2><p>启动rabbitmq服务报下面错误</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@qsyyke /<span class="token punctuation">]</span><span class="token comment"># systemctl start rabbitmq-server.service</span>\nJob <span class="token keyword">for</span> rabbitmq-server.service failed because the control process exited with error code.\nSee <span class="token string">&quot;systemctl status rabbitmq-server.service&quot;</span> and <span class="token string">&quot;journalctl -xe&quot;</span> <span class="token keyword">for</span> details.\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>看了网上的解决，说的是<code>host文件并未配置，mq服务要启动，需要对应的ip和主机名映射</code>，所以这里我重新修改了<code>hostname</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>hostnamectl set-hostname auror\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>然后重新启动服务，启动成功</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl start rabbitmq-server.service\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="常用命令" tabindex="-1"><a class="header-anchor" href="#常用命令" aria-hidden="true">#</a> 常用命令</h2><ul><li><p>关闭应用的命令为</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>rabbitmqctl stop_app\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>清除的命令为</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>rabbitmqctl reset\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>重新启动命令为</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>rabbitmqctl start_app\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li></ul>',9),p={},b=(0,a(83744).Z)(p,[["render",function(s,e){return(0,n.wg)(),(0,n.iD)(n.HY,null,[l,r,t,i,c],64)}]])}}]);